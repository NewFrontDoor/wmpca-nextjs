{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bratalix\\\\Documents\\\\ReactApps\\\\wmpca-nextjs\\\\pages\\\\[slug].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport PropTypes from 'prop-types';\nimport styled from '@emotion/styled';\nimport Header from '../components/header';\nimport BlockContent from '@sanity/block-content-to-react';\nimport sanity from '../lib/sanity';\nimport Form from '../components/form';\nimport getVideoId from 'get-video-id';\nimport Vimeo from '@u-wave/react-vimeo'; //import Youtube from 'react-youtube';\n\nimport Youtube from '@u-wave/react-youtube';\nimport AudioPlayer from 'react-audio-player';\nimport MainImage from '../components/main-image';\nimport Layout from '../components/layout';\nconst Grid = styled.div`\n  display: grid;\n  gap: 20px;\n`;\nconst Wrapper = styled.article`\n  min-height: 550px;\n`;\n\nconst InternalLinkSerializer = props => {\n  return __jsx(Link, {\n    to: props.mark.slug,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, props.children);\n};\n\nfunction FormSerializer({\n  node: {\n    header,\n    id,\n    body,\n    fields\n  }\n}) {\n  return __jsx(Form, {\n    header: header,\n    id: id,\n    description: body,\n    fields: fields,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  });\n}\n\nconst Audio = ({\n  node\n}) => {\n  const {\n    url\n  } = node;\n  return __jsx(AudioPlayer, {\n    src: url,\n    autoplay: true,\n    controls: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  });\n};\n\nconst Video = ({\n  node\n}) => {\n  const {\n    url\n  } = node;\n\n  if (url) {\n    const video = getVideoId(url || null);\n\n    if (video.service === 'youtube') {\n      return __jsx(Youtube, {\n        modestBranding: true,\n        annotations: false,\n        video: video.id,\n        height: 360,\n        width: 640,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      });\n    }\n\n    if (video.service === 'vimeo') {\n      return __jsx(Vimeo, {\n        showTitle: false,\n        showByline: false,\n        video: video.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      });\n    }\n  }\n};\n\nconst serializers = {\n  types: {\n    code: props => __jsx(\"pre\", {\n      \"data-language\": props.node.language,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, __jsx(\"code\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, props.node.code)),\n    form: FormSerializer,\n    videoEmbed: Video,\n    audioEmbed: Audio\n  },\n  marks: {\n    internalLink: InternalLinkSerializer\n  }\n};\nexport default function SanityPage({\n  mainData\n}) {\n  const {\n    body\n  } = mainData;\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, __jsx(Grid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, __jsx(Header, {\n    heading: new Array(data.title),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), __jsx(Wrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, data.mainImage ? __jsx(MainImage, {\n    mainImage: data.mainImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }) : '', __jsx(BlockContent, {\n    blocks: data.content,\n    serializers: serializers,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }))));\n}\nSanityPage.propTypes = {\n  mainData: PropTypes.object.isRequired\n};\n\nPage.getInitialProps = async ({\n  query\n}) => {\n  const pageQuery = `\n      *[_type == \"page\" && slug.current match '${query.slug}']{\n        ...,\n          content[]{\n            ...,\n            _type == 'reference' => @-> {\n              ...,\n              blocks[] {\n                ...,\n                _type == 'reference' => @ ->\n              }\n            },\n            markDefs[] {\n              ...,\n              _type == 'internalLink' => {\n                  'slug': @.reference->slug.current\n              }\n            },\n          asset->\n          },\n          mainImage{\n            asset->\n          },\n          'id': _id,\n        'pathname': '/' + slug.current\n      }\n    `;\n  const results = await fetchQuery(`{\n          \"mainData\": ${pageQuery}\n      }`);\n  return results;\n};","map":{"version":3,"sources":["C:/Users/Bratalix/Documents/ReactApps/wmpca-nextjs/pages/[slug].js"],"names":["Link","PropTypes","styled","Header","BlockContent","sanity","Form","getVideoId","Vimeo","Youtube","AudioPlayer","MainImage","Layout","Grid","div","Wrapper","article","InternalLinkSerializer","props","mark","slug","children","FormSerializer","node","header","id","body","fields","Audio","url","Video","video","service","serializers","types","code","language","form","videoEmbed","audioEmbed","marks","internalLink","SanityPage","mainData","Array","data","title","mainImage","content","propTypes","object","isRequired","Page","getInitialProps","query","pageQuery","results","fetchQuery"],"mappings":"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","sourcesContent":["import Link from 'next/link';\r\nimport PropTypes from 'prop-types';\r\nimport styled from '@emotion/styled';\r\nimport Header from '../components/header';\r\nimport BlockContent from '@sanity/block-content-to-react';\r\nimport sanity from '../lib/sanity';\r\nimport Form from '../components/form';\r\nimport getVideoId from 'get-video-id';\r\nimport Vimeo from '@u-wave/react-vimeo';\r\n//import Youtube from 'react-youtube';\r\nimport Youtube from '@u-wave/react-youtube';\r\nimport AudioPlayer from 'react-audio-player'\r\nimport MainImage from '../components/main-image';\r\nimport Layout from '../components/layout';\r\n\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  gap: 20px;\r\n`;\r\n\r\nconst Wrapper = styled.article`\r\n  min-height: 550px;\r\n`;\r\n\r\nconst InternalLinkSerializer = props => {\r\n  return <Link to={props.mark.slug}>{props.children}</Link>;\r\n};\r\n\r\nfunction FormSerializer({node: {header, id, body, fields}}) {\r\n  return <Form header={header} id={id} description={body} fields={fields} />;\r\n}\r\n\r\nconst Audio = ({node}) => {\r\n  const {url} = node;\r\n  return <AudioPlayer src={url} autoplay controls />\r\n}\r\n\r\nconst Video = ({node}) => {\r\n  const {url} = node;\r\n  if (url) {\r\n    const video = getVideoId(url || null);\r\n\r\n    if (video.service === 'youtube') {\r\n      return <Youtube modestBranding annotations={false} video={video.id} height={360} width={640}/>;\r\n    }\r\n\r\n    if (video.service === 'vimeo') {\r\n      return <Vimeo showTitle={false} showByline={false} video={video.id} />;\r\n    }\r\n  }\r\n};\r\n\r\n\r\nconst serializers = {\r\n  types: {\r\n    code: props => (\r\n      <pre data-language={props.node.language}>\r\n        <code>{props.node.code}</code>\r\n      </pre>\r\n    ),\r\n    form: FormSerializer,\r\n    videoEmbed: Video,\r\n    audioEmbed: Audio\r\n  },\r\n  marks: {\r\n    internalLink: InternalLinkSerializer,\r\n  }\r\n}\r\n\r\nexport default function SanityPage({mainData}) {\r\n  const {body} = mainData;\r\n  return  (\r\n    <Layout>\r\n      <Grid>\r\n        <Header heading={new Array(data.title)} />\r\n        <Wrapper>\r\n          {data.mainImage ? <MainImage mainImage={data.mainImage} /> : ''}\r\n          <BlockContent blocks={data.content} serializers={serializers} />\r\n        </Wrapper>\r\n      </Grid>\r\n    </Layout>\r\n      \r\n  ) ;\r\n}\r\n\r\nSanityPage.propTypes = {\r\n    mainData: PropTypes.object.isRequired \r\n};\r\n\r\nPage.getInitialProps = async ({query}) => {\r\n    const pageQuery = `\r\n      *[_type == \"page\" && slug.current match '${query.slug}']{\r\n        ...,\r\n          content[]{\r\n            ...,\r\n            _type == 'reference' => @-> {\r\n              ...,\r\n              blocks[] {\r\n                ...,\r\n                _type == 'reference' => @ ->\r\n              }\r\n            },\r\n            markDefs[] {\r\n              ...,\r\n              _type == 'internalLink' => {\r\n                  'slug': @.reference->slug.current\r\n              }\r\n            },\r\n          asset->\r\n          },\r\n          mainImage{\r\n            asset->\r\n          },\r\n          'id': _id,\r\n        'pathname': '/' + slug.current\r\n      }\r\n    `;\r\n    const results = await fetchQuery(\r\n      `{\r\n          \"mainData\": ${pageQuery}\r\n      }`\r\n    );\r\n    return results;\r\n  };"]},"metadata":{},"sourceType":"module"}